<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Embed Start -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="TaksilLabs — Helldivers II Mods">
  <meta property="og:description" content="Home to Darth Taksil's Helldivers II mods.">
  <meta property="og:url" content="https://taksillabs.com/">
  <meta property="og:image" content="https://taksillabs.com/embed-preview.jpg">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="TaksilLabs — Helldivers II Mods">
  <meta name="twitter:description" content="Home to Darth Taksil's Helldivers II mods.">
  <meta name="twitter:image" content="https://taksillabs.com/embed-preview.jpg">
  <!-- Embed End -->

  <title>TaksilLabs Mods</title>
  <style>
    /* Early 90s-ish: light gray, strong borders, classic links */
    :root{
      --bg: #c6c6c6;
      --panel: #e7e7e7;
      --border-dark: #4b4b4b;
      --border-mid: #8a8a8a;
      --border-light: #ffffff;
      --text: #111;
      --muted: #333;

      --link: #0000ee;
      --visited: #551a8b;

      --ok: #0a7a0a;
      --warn: #a35a00;
      --bad: #b00020;
      --info: #0057a3;
    }

    html,body{ height:100%; }
    body{
      margin:0;
      color: var(--text);
      font-family: Verdana, Arial, Helvetica, sans-serif;
      background:
        linear-gradient(0deg, rgba(255,255,255,.05), rgba(255,255,255,.05)),
        repeating-linear-gradient(45deg, rgba(0,0,0,.03) 0 6px, rgba(0,0,0,.00) 6px 12px),
        var(--bg);
    }

    a{ color: var(--link); }
    a:visited{ color: var(--visited); }

    .wrap{
      max-width: 980px;
      margin: 22px auto 60px;
      padding: 0 12px;
    }

    .bevel{
      background: var(--panel);
      border-top: 2px solid var(--border-light);
      border-left: 2px solid var(--border-light);
      border-right: 2px solid var(--border-dark);
      border-bottom: 2px solid var(--border-dark);
      box-shadow: 0 1px 0 rgba(0,0,0,.15);
    }

    .header{
      padding: 14px 14px 10px;
    }

    h1{
      margin:0;
      font-size: 20px;
      letter-spacing: .2px;
    }
    .sub{
      margin: 6px 0 0;
      color: var(--muted);
      font-size: 12px;
    }

    .toolbar{
      margin-top: 10px;
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items:center;
      justify-content: space-between;
    }

    .field{
      display:flex;
      gap: 6px;
      align-items:center;
      flex: 1 1 320px;
    }
    label{
      font-size: 12px;
      font-weight: bold;
      white-space: nowrap;
    }
    input, select{
      width: 100%;
      padding: 6px 8px;
      border: 1px solid var(--border-mid);
      background: #fff;
      color: #111;
      font-size: 12px;
    }

    .nav{
      font-size: 12px;
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items:center;
      justify-content:flex-end;
      flex: 1 1 200px;
    }

    .main{
      margin-top: 12px;
      padding: 10px 10px 6px;
    }

    .table{
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
    }

    .table th, .table td{
      border: 1px solid var(--border-mid);
      padding: 8px;
      vertical-align: top;
      background: #fff;
    }
    .table th{
      background: #dcdcdc;
      text-align:left;
      font-size: 12px;
    }

    .name{
      font-weight: bold;
      font-size: 13px;
    }
    .desc{
      margin-top: 4px;
      color: var(--muted);
    }

    .mod-cell{
      position: relative;
      min-height: 95px; /* adjust if needed */
    }

    .mod-content{
      padding-right: 80px; /* space so text doesn't overlap Versions */
    }

    .versions-link{
      position: absolute;
      bottom: 8px;
      right: 8px;
      font-size: 11px;
    }

    .mini-btn{
      display:inline-block;
      padding: 3px 8px;
      font-size: 10px;
      font-weight: bold;
      text-decoration: none;
      color: #000;

      background: #d9d9d9;

      border-top: 2px solid #ffffff;
      border-left: 2px solid #ffffff;
      border-right: 2px solid #4b4b4b;
      border-bottom: 2px solid #4b4b4b;

      box-shadow: 0 1px 0 rgba(0,0,0,.2);
    }

    .mini-btn:active{
      border-top: 2px solid #4b4b4b;
      border-left: 2px solid #4b4b4b;
      border-right: 2px solid #ffffff;
      border-bottom: 2px solid #ffffff;
      transform: translateY(1px);
    }

    .badge{
      display:inline-block;
      padding: 2px 6px;
      border: 1px solid var(--border-mid);
      background: #f6f6f6;
      font-weight: bold;
      font-size: 11px;
      margin-right: 6px;
    }

    .status{
      display:inline-block;
      padding: 2px 6px;
      border: 1px solid var(--border-mid);
      font-weight: bold;
      font-size: 11px;
      color: #fff;
    }
    .WORKING{ background: var(--ok); }
    .UNTESTED{ background: var(--warn); }
    .UPDATING{ background: var(--info); }
    .BROKEN{ background: var(--bad); }

    .btn{
      display:inline-block;
      padding: 7px 10px;
      text-decoration:none;
      color:#000;
      background: #d9d9d9;
      border-top: 2px solid var(--border-light);
      border-left: 2px solid var(--border-light);
      border-right: 2px solid var(--border-dark);
      border-bottom: 2px solid var(--border-dark);
      font-weight: bold;
    }
    .btn:active{
      border-top: 2px solid var(--border-dark);
      border-left: 2px solid var(--border-dark);
      border-right: 2px solid var(--border-light);
      border-bottom: 2px solid var(--border-light);
      transform: translateY(1px);
    }

    .foot{
      margin-top: 10px;
      padding: 10px 12px;
      font-size: 11px;
      color: #222;
    }

    .right{ text-align:right; }

    @media (max-width: 720px){
      .right{ text-align:left; }
      .table th:nth-child(3), .table td:nth-child(3){ display:none; } /* hide tags column on small screens */
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="bevel header">
      <h1>TaksilLabs - Helldivers II Star Wars Mods</h1>
      <p class="sub">Click “Download ZIP” to download a mod.  All mods are intended to be used with the Arsenal Mod Loader.</p>

      <div class="toolbar">
        <div class="field">
          <label for="q">Search:</label>
          <input id="q" type="search" placeholder="clone trooper, blaster, UI..." />
        </div>

        <div class="field" style="flex: 0 0 220px;">
          <label for="status">Status:</label>
          <select id="status">
            <option value="all">All</option>
            <option value="WORKING">Tested, Working</option>
            <option value="UNTESTED">Untested</option>
            <option value="UPDATING">Broken, Being Updated</option>
            <option value="BROKEN">Broken</option>
          </select>
        </div>

        <div class="nav">
          <a href="https://rsnl.gg/">Arsenal Mod Loader</a>
        </div>
      </div>
    </div>

    <div class="bevel main">
      <table class="table" aria-live="polite">
        <thead>
          <tr>
            <th style="width: 44%;">Mod</th>
            <th style="width: 26%;">Status / Tested</th>
            <th style="width: 18%;">Tags</th>
            <th class="right" style="width: 12%;">Download</th>
          </tr>
        </thead>
        <tbody id="rows">
          <tr><td colspan="4">Loading mods.json…</td></tr>
        </tbody>
      </table>
    </div>

    <div class="bevel foot">
      <div><b>Status meanings:</b> WORKING = tested on the listed game version • UNTESTED = not verified yet • UPDATING = fix in progress • BROKEN = confirmed broken</div>
      <div style="margin-top:6px;">Legal: fan-made mods; not affiliated with Arrowhead or Star Wars rights holders.</div>
    </div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);
    const q = $("q");
    const statusSel = $("status");
    const rows = $("rows");

    function escapeHtml(s){
      return String(s ?? "").replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
    }

    function directDownloadUrl(repo, asset){
      // Instant download of latest release asset (no “Source code” confusion)
      return `https://github.com/TaksilLabs/${repo}/releases/latest/download/${asset}`;
    }

    function repoUrl(repo){ return `https://github.com/TaksilLabs/${repo}`; }
    function releasesUrl(repo){ return `${repoUrl(repo)}/releases`; }

    let MODS = [];

    async function load(){
      try{
        const res = await fetch("./mods.json", { cache: "no-store" });
        if(!res.ok) throw new Error("HTTP " + res.status);
        MODS = await res.json();
        render();
      }catch(e){
        rows.innerHTML = `<tr><td colspan="4"><b>Error:</b> Could not load mods.json. (${escapeHtml(e.message)})</td></tr>`;
      }
    }

    function matchesSearch(m, term){
      if(!term) return true;
      const hay = [
        m.name, m.description, m.type, m.version, m.testedOn,
        ...(m.tags || [])
      ].join(" ").toLowerCase();
      return hay.includes(term);
    }

    function render(){
      const term = q.value.trim().toLowerCase();
      const s = statusSel.value;

      let items = MODS.filter(m => {
        const st = (m.status || "UNTESTED").toUpperCase();
        const statusOk = (s === "all") || (st === s);
        return statusOk && matchesSearch(m, term);
      });

      // Sort: WORKING first, then UPDATING, UNTESTED, BROKEN; then name
      const rank = { WORKING: 0, UPDATING: 1, UNTESTED: 2, BROKEN: 3 };
      items.sort((a,b) => {
        const sa = Number.isFinite(a.sort) ? a.sort : 9999;
        const sb = Number.isFinite(b.sort) ? b.sort : 9999;
        if (sa !== sb) return sa - sb;

        // tie-breakers if same sort value
        const ra = rank[(a.status||"UNTESTED").toUpperCase()] ?? 9;
        const rb = rank[(b.status||"UNTESTED").toUpperCase()] ?? 9;
        if (ra !== rb) return ra - rb;

        return String(a.name||"").localeCompare(String(b.name||""));
      });

      if(items.length === 0){
        rows.innerHTML = `<tr><td colspan="4">No mods match your filters.</td></tr>`;
        return;
      }

      rows.innerHTML = items.map(m => {
        const name = escapeHtml(m.name || "Untitled");
        const desc = escapeHtml(m.description || "");
        const repo = escapeHtml(m.repo || "");
        const asset = escapeHtml(m.asset || "");
        const version = escapeHtml(m.version || "");
        const size = escapeHtml(m.size || "");
        const type = escapeHtml(m.type || "");
        const st = (m.status || "UNTESTED").toUpperCase();
        const tested = escapeHtml(m.testedOn || "");

        const tags = (m.tags || []).slice(0, 6).map(t => `<span class="badge">${escapeHtml(t)}</span>`).join(" ");

        const dl = (repo && asset) ? directDownloadUrl(repo, asset) : releasesUrl(repo);

        const testedLine = (st === "WORKING" && tested)
          ? `<div style="margin-top:6px;"><span class="badge">Tested on ${tested}</span></div>`
          : (st !== "WORKING" ? `<div style="margin-top:6px;"><span class="badge">Tested on: —</span></div>` : "");

        return `
          <tr>
              <td class="mod-cell">
                <div class="mod-content">
                  <div class="name">${name}</div>
                  <div class="desc">${desc}</div>

                  <div style="margin-top:6px;">
                    ${version ? `<span class="badge">${type}</span>` : ""}
                    ${size ? `<span class="badge">${size}</span>` : ""}
                  </div>
                </div>

                ${repo ? `
                  <div class="versions-link">
                    <a class="mini-btn" href="${releasesUrl(repo)}" target="_blank" rel="noopener">
                      Versions
                    </a>
                  </div>
                ` : ""}
            </td>

            <td>
              <span class="status ${st}">${st === "WORKING" ? "TESTED, WORKING" :
                st === "UNTESTED" ? "UNTESTED" :
                st === "UPDATING" ? "BROKEN, UPDATING" :
                "BROKEN"}</span>
              ${testedLine}
            </td>

            <td>${tags || "<span class='badge'>—</span>"}</td>

            <td class="right">
              ${repo && asset
                ? `<a class="btn" href="${dl}">Download ZIP</a>`
                : `<a class="btn" href="${releasesUrl(repo)}">Releases</a>`}
            </td>
          </tr>
        `;
      }).join("");
    }

    q.addEventListener("input", render);
    statusSel.addEventListener("change", render);

    load();
  </script>
</body>
</html>